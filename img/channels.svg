<?xml version="1.0" encoding="UTF-8" standalone="no"?><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" contentScriptType="application/ecmascript" contentStyleType="text/css" height="693px" preserveAspectRatio="none" style="width:740px;height:693px;" version="1.1" viewBox="0 0 740 693" width="740px" zoomAndPan="magnify"><defs><filter height="300%" id="f1tjk3w7jaiphk" width="300%" x="-1" y="-1"><feGaussianBlur result="blurOut" stdDeviation="2.0"/><feColorMatrix in="blurOut" result="blurOut2" type="matrix" values="0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 .4 0"/><feOffset dx="4.0" dy="4.0" in="blurOut2" result="blurOut3"/><feBlend in="SourceGraphic" in2="blurOut3" mode="normal"/></filter></defs><g><!--MD5=[085076096658226fe7d3ac7a26d9b629]
class Listener--><rect codeLine="1" fill="#FEFECE" filter="url(#f1tjk3w7jaiphk)" height="66.7422" id="Listener" style="stroke:#A80036;stroke-width:1.5;" width="131" x="116" y="580"/><ellipse cx="140.9" cy="598.9688" fill="#3495EB" rx="11" ry="11" style="stroke:#A80036;stroke-width:1.0;"/><path d="M141.7438,605.7188 L139.2906,605.7188 L139.2906,595.4688 L136.15,595.4688 L136.15,593.3281 L144.8844,593.3281 L144.8844,595.4688 L141.7438,595.4688 L141.7438,605.7188 Z " fill="#000000"/><text fill="#000000" font-family="sans-serif" font-size="12" font-style="italic" lengthAdjust="spacing" textLength="70" x="155.1" y="596.1387">«typealias»</text><text fill="#000000" font-family="sans-serif" font-size="12" font-style="italic" lengthAdjust="spacing" textLength="50" x="165.1" y="610.1074">Listener</text><rect fill="#FFFFFF" height="15.9688" style="stroke:#000000;stroke-width:1.0;stroke-dasharray:2.0,2.0;" width="9" x="241" y="577"/><text fill="#000000" font-family="sans-serif" font-size="12" font-style="italic" lengthAdjust="spacing" textLength="7" x="242" y="589.1387">T</text><line style="stroke:#A80036;stroke-width:1.5;" x1="117" x2="246" y1="617.9375" y2="617.9375"/><line style="stroke:#A80036;stroke-width:1.5;" x1="117" x2="246" y1="625.9375" y2="625.9375"/><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacing" textLength="57" x="122" y="640.1479">alias for:</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="58" x="183" y="640.1479">(T) -&gt; Unit</text><!--MD5=[1e4e6ac1845d89d680410515caa0c0ac]
class Channel--><rect codeLine="5" fill="#FEFECE" filter="url(#f1tjk3w7jaiphk)" height="132.8281" id="Channel" style="stroke:#A80036;stroke-width:1.5;" width="251" x="282" y="547"/><ellipse cx="372.25" cy="563" fill="#B4A7E5" rx="11" ry="11" style="stroke:#A80036;stroke-width:1.0;"/><path d="M368.1719,558.7656 L368.1719,556.6094 L375.5625,556.6094 L375.5625,558.7656 L373.0938,558.7656 L373.0938,566.8438 L375.5625,566.8438 L375.5625,569 L368.1719,569 L368.1719,566.8438 L370.6406,566.8438 L370.6406,558.7656 L368.1719,558.7656 Z " fill="#000000"/><text fill="#000000" font-family="sans-serif" font-size="12" font-style="italic" lengthAdjust="spacing" textLength="51" x="392.75" y="567.1543">Channel</text><rect fill="#FFFFFF" height="15.9688" style="stroke:#000000;stroke-width:1.0;stroke-dasharray:2.0,2.0;" width="9" x="527" y="544"/><text fill="#000000" font-family="sans-serif" font-size="12" font-style="italic" lengthAdjust="spacing" textLength="7" x="528" y="556.1387">T</text><line style="stroke:#A80036;stroke-width:1.5;" x1="283" x2="532" y1="579" y2="579"/><ellipse cx="293" cy="590" fill="none" rx="3" ry="3" style="stroke:#038048;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="113" x="302" y="593.2104">streamTerm: Struct</text><ellipse cx="293" cy="602.8047" fill="none" rx="3" ry="3" style="stroke:#038048;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="103" x="302" y="606.0151">isClosed: Boolean</text><line style="stroke:#A80036;stroke-width:1.0;" x1="283" x2="532" y1="612.6094" y2="612.6094"/><ellipse cx="293" cy="623.6094" fill="#84BE84" rx="3" ry="3" style="stroke:#038048;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="203" x="302" y="626.8198">addListener(listener: Listener&lt;T?&gt;)</text><ellipse cx="293" cy="636.4141" fill="#84BE84" rx="3" ry="3" style="stroke:#038048;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="225" x="302" y="639.6245">removeListener(listener: Listener&lt;T?&gt;)</text><ellipse cx="293" cy="649.2188" fill="#84BE84" rx="3" ry="3" style="stroke:#038048;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="89" x="302" y="652.4292">clearListeners()</text><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:1.0,2.0;" x1="283" x2="532" y1="659.0234" y2="659.0234"/><ellipse cx="293" cy="670.0234" fill="#84BE84" rx="3" ry="3" style="stroke:#038048;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="38" x="302" y="673.2339">close()</text><!--MD5=[f7baa1082940d3ce43d405e81b39ac4c]
class InputChannel--><rect codeLine="16" fill="#FEFECE" filter="url(#f1tjk3w7jaiphk)" height="99.2188" id="InputChannel" style="stroke:#A80036;stroke-width:1.5;" width="130" x="166.5" y="387"/><ellipse cx="182.85" cy="403" fill="#B4A7E5" rx="11" ry="11" style="stroke:#A80036;stroke-width:1.0;"/><path d="M178.7719,398.7656 L178.7719,396.6094 L186.1625,396.6094 L186.1625,398.7656 L183.6938,398.7656 L183.6938,406.8438 L186.1625,406.8438 L186.1625,409 L178.7719,409 L178.7719,406.8438 L181.2406,406.8438 L181.2406,398.7656 L178.7719,398.7656 Z " fill="#000000"/><text fill="#000000" font-family="sans-serif" font-size="12" font-style="italic" lengthAdjust="spacing" textLength="84" x="197.15" y="407.1543">InputChannel</text><rect fill="#FFFFFF" height="15.9688" style="stroke:#000000;stroke-width:1.0;stroke-dasharray:2.0,2.0;" width="9" x="290.5" y="384"/><text fill="#000000" font-family="sans-serif" font-size="12" font-style="italic" lengthAdjust="spacing" textLength="7" x="291.5" y="396.1387">T</text><line style="stroke:#A80036;stroke-width:1.5;" x1="167.5" x2="295.5" y1="419" y2="419"/><ellipse cx="177.5" cy="430" fill="none" rx="3" ry="3" style="stroke:#038048;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="91" x="186.5" y="433.2104">isOver: Boolean</text><ellipse cx="177.5" cy="442.8047" fill="none" rx="3" ry="3" style="stroke:#038048;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="104" x="186.5" y="446.0151">available: Boolean</text><line style="stroke:#A80036;stroke-width:1.0;" x1="167.5" x2="295.5" y1="452.6094" y2="452.6094"/><ellipse cx="177.5" cy="463.6094" fill="#84BE84" rx="3" ry="3" style="stroke:#038048;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="55" x="186.5" y="466.8198">read(): T?</text><ellipse cx="177.5" cy="476.4141" fill="#84BE84" rx="3" ry="3" style="stroke:#038048;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="56" x="186.5" y="479.6245">peek(): T?</text><!--MD5=[65a4a8a9711b185e0a80cb86d89d8ef9]
class OutputChannel--><rect codeLine="24" fill="#FEFECE" filter="url(#f1tjk3w7jaiphk)" height="73.6094" id="OutputChannel" style="stroke:#A80036;stroke-width:1.5;" width="136" x="567.5" y="399.5"/><ellipse cx="582.5" cy="415.5" fill="#B4A7E5" rx="11" ry="11" style="stroke:#A80036;stroke-width:1.0;"/><path d="M578.4219,411.2656 L578.4219,409.1094 L585.8125,409.1094 L585.8125,411.2656 L583.3438,411.2656 L583.3438,419.3438 L585.8125,419.3438 L585.8125,421.5 L578.4219,421.5 L578.4219,419.3438 L580.8906,419.3438 L580.8906,411.2656 L578.4219,411.2656 Z " fill="#000000"/><text fill="#000000" font-family="sans-serif" font-size="12" font-style="italic" lengthAdjust="spacing" textLength="93" x="596.5" y="419.6543">OutputChannel</text><rect fill="#FFFFFF" height="15.9688" style="stroke:#000000;stroke-width:1.0;stroke-dasharray:2.0,2.0;" width="9" x="697.5" y="396.5"/><text fill="#000000" font-family="sans-serif" font-size="12" font-style="italic" lengthAdjust="spacing" textLength="7" x="698.5" y="408.6387">T</text><line style="stroke:#A80036;stroke-width:1.5;" x1="568.5" x2="702.5" y1="431.5" y2="431.5"/><line style="stroke:#A80036;stroke-width:1.5;" x1="568.5" x2="702.5" y1="439.5" y2="439.5"/><ellipse cx="578.5" cy="450.5" fill="#84BE84" rx="3" ry="3" style="stroke:#038048;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="43" x="587.5" y="453.7104">write(T)</text><ellipse cx="578.5" cy="463.3047" fill="#84BE84" rx="3" ry="3" style="stroke:#038048;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="36" x="587.5" y="466.5151">flush()</text><!--MD5=[4c95f9bed35113f7168e59ba3b2ef414]
class InputStore--><rect codeLine="29" fill="#FEFECE" filter="url(#f1tjk3w7jaiphk)" height="153.6328" id="InputStore" style="stroke:#A80036;stroke-width:1.5;" width="337" x="7" y="128.5"/><ellipse cx="137.75" cy="144.5" fill="#B4A7E5" rx="11" ry="11" style="stroke:#A80036;stroke-width:1.0;"/><path d="M133.6719,140.2656 L133.6719,138.1094 L141.0625,138.1094 L141.0625,140.2656 L138.5938,140.2656 L138.5938,148.3438 L141.0625,148.3438 L141.0625,150.5 L133.6719,150.5 L133.6719,148.3438 L136.1406,148.3438 L136.1406,140.2656 L133.6719,140.2656 Z " fill="#000000"/><text fill="#000000" font-family="sans-serif" font-size="12" font-style="italic" lengthAdjust="spacing" textLength="67" x="158.25" y="148.6543">InputStore</text><line style="stroke:#A80036;stroke-width:1.5;" x1="8" x2="343" y1="160.5" y2="160.5"/><ellipse cx="18" cy="171.5" fill="none" rx="3" ry="3" style="stroke:#038048;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="162" x="27" y="174.7104">stdIn: InputChannel&lt;String&gt;</text><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:1.0,2.0;" x1="8" x2="343" y1="181.3047" y2="181.3047"/><ellipse cx="18" cy="192.3047" fill="none" rx="3" ry="3" style="stroke:#038048;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="181" x="27" y="195.5151">current: InputChannel&lt;String&gt;?</text><ellipse cx="18" cy="205.1094" fill="none" rx="3" ry="3" style="stroke:#038048;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="198" x="27" y="208.3198">currentAliases: Sequence&lt;String&gt;</text><line style="stroke:#A80036;stroke-width:1.0;" x1="8" x2="343" y1="214.9141" y2="214.9141"/><ellipse cx="18" cy="225.9141" fill="#84BE84" rx="3" ry="3" style="stroke:#038048;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="170" x="27" y="229.1245">setCurrent(String): InputStore</text><ellipse cx="18" cy="238.7188" fill="#84BE84" rx="3" ry="3" style="stroke:#038048;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="262" x="27" y="241.9292">setCurrent(InputChannel&lt;String&gt;): InputStore</text><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:1.0,2.0;" x1="8" x2="343" y1="248.5234" y2="248.5234"/><ellipse cx="18" cy="259.5234" fill="#84BE84" rx="3" ry="3" style="stroke:#038048;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="311" x="27" y="262.7339">findByTerm(Term): Sequence&lt;InputChannel&lt;String&gt;&gt;</text><ellipse cx="18" cy="272.3281" fill="#84BE84" rx="3" ry="3" style="stroke:#038048;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="304" x="27" y="275.5386">aliasesOf(InputChannel&lt;String&gt;): Sequence&lt;String&gt;</text><!--MD5=[02a1f05eac83fd68d63f990662b2b84d]
class OutputStore--><rect codeLine="62" fill="#FEFECE" filter="url(#f1tjk3w7jaiphk)" height="179.2422" id="OutputStore" style="stroke:#A80036;stroke-width:1.5;" width="347" x="379" y="116"/><ellipse cx="510.25" cy="132" fill="#B4A7E5" rx="11" ry="11" style="stroke:#A80036;stroke-width:1.0;"/><path d="M506.1719,127.7656 L506.1719,125.6094 L513.5625,125.6094 L513.5625,127.7656 L511.0938,127.7656 L511.0938,135.8438 L513.5625,135.8438 L513.5625,138 L506.1719,138 L506.1719,135.8438 L508.6406,135.8438 L508.6406,127.7656 L506.1719,127.7656 Z " fill="#000000"/><text fill="#000000" font-family="sans-serif" font-size="12" font-style="italic" lengthAdjust="spacing" textLength="76" x="530.75" y="136.1543">OutputStore</text><line style="stroke:#A80036;stroke-width:1.5;" x1="380" x2="725" y1="148" y2="148"/><ellipse cx="390" cy="159" fill="none" rx="3" ry="3" style="stroke:#038048;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="182" x="399" y="162.2104">stdOut: OutputChannel&lt;String&gt;</text><ellipse cx="390" cy="171.8047" fill="none" rx="3" ry="3" style="stroke:#038048;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="179" x="399" y="175.0151">stdErr: OutputChannel&lt;String&gt;</text><ellipse cx="390" cy="184.6094" fill="none" rx="3" ry="3" style="stroke:#038048;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="243" x="399" y="187.8198">warnings: OutputChannel&lt;PrologWarning&gt;</text><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:1.0,2.0;" x1="380" x2="725" y1="194.4141" y2="194.4141"/><ellipse cx="390" cy="205.4141" fill="none" rx="3" ry="3" style="stroke:#038048;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="191" x="399" y="208.6245">current: OutputChannel&lt;String&gt;?</text><ellipse cx="390" cy="218.2188" fill="none" rx="3" ry="3" style="stroke:#038048;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="198" x="399" y="221.4292">currentAliases: Sequence&lt;String&gt;</text><line style="stroke:#A80036;stroke-width:1.0;" x1="380" x2="725" y1="228.0234" y2="228.0234"/><ellipse cx="390" cy="239.0234" fill="#84BE84" rx="3" ry="3" style="stroke:#038048;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="180" x="399" y="242.2339">setCurrent(String): OutputStore</text><ellipse cx="390" cy="251.8281" fill="#84BE84" rx="3" ry="3" style="stroke:#038048;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="282" x="399" y="255.0386">setCurrent(OutputChannel&lt;String&gt;): OutputStore</text><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:1.0,2.0;" x1="380" x2="725" y1="261.6328" y2="261.6328"/><ellipse cx="390" cy="272.6328" fill="#84BE84" rx="3" ry="3" style="stroke:#038048;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="321" x="399" y="275.8433">findByTerm(Term): Sequence&lt;OutputChannel&lt;String&gt;&gt;</text><ellipse cx="390" cy="285.4375" fill="#84BE84" rx="3" ry="3" style="stroke:#038048;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="314" x="399" y="288.6479">aliasesOf(OutputChannel&lt;String&gt;): Sequence&lt;String&gt;</text><!--MD5=[4dfc6a72b8dd60daa1b635d583ff79da]
class Map--><rect codeLine="57" fill="#FEFECE" filter="url(#f1tjk3w7jaiphk)" height="48" id="Map" style="stroke:#A80036;stroke-width:1.5;" width="86" x="373.5" y="412.5"/><ellipse cx="388.5" cy="428.5" fill="#B4A7E5" rx="11" ry="11" style="stroke:#A80036;stroke-width:1.0;"/><path d="M384.4219,424.2656 L384.4219,422.1094 L391.8125,422.1094 L391.8125,424.2656 L389.3438,424.2656 L389.3438,432.3438 L391.8125,432.3438 L391.8125,434.5 L384.4219,434.5 L384.4219,432.3438 L386.8906,432.3438 L386.8906,424.2656 L384.4219,424.2656 Z " fill="#000000"/><text fill="#000000" font-family="sans-serif" font-size="12" font-style="italic" lengthAdjust="spacing" textLength="26" x="402.5" y="432.6543">Map</text><rect fill="#FFFFFF" height="15.9688" style="stroke:#000000;stroke-width:1.0;stroke-dasharray:2.0,2.0;" width="26" x="436.5" y="409.5"/><text fill="#000000" font-family="sans-serif" font-size="12" font-style="italic" lengthAdjust="spacing" textLength="24" x="437.5" y="421.6387">K, V</text><line style="stroke:#A80036;stroke-width:1.5;" x1="374.5" x2="458.5" y1="444.5" y2="444.5"/><line style="stroke:#A80036;stroke-width:1.5;" x1="374.5" x2="458.5" y1="452.5" y2="452.5"/><!--MD5=[b8f9c9f402fdb0639661b25476f0741f]
class ExecutionContext--><rect codeLine="71" fill="#FEFECE" filter="url(#f1tjk3w7jaiphk)" height="48" id="ExecutionContext" style="stroke:#A80036;stroke-width:1.5;" width="143" x="292" y="7"/><ellipse cx="307" cy="23" fill="#B4A7E5" rx="11" ry="11" style="stroke:#A80036;stroke-width:1.0;"/><path d="M302.9219,18.7656 L302.9219,16.6094 L310.3125,16.6094 L310.3125,18.7656 L307.8438,18.7656 L307.8438,26.8438 L310.3125,26.8438 L310.3125,29 L302.9219,29 L302.9219,26.8438 L305.3906,26.8438 L305.3906,18.7656 L302.9219,18.7656 Z " fill="#000000"/><text fill="#000000" font-family="sans-serif" font-size="12" font-style="italic" lengthAdjust="spacing" textLength="111" x="321" y="27.1543">ExecutionContext</text><line style="stroke:#A80036;stroke-width:1.5;" x1="293" x2="434" y1="39" y2="39"/><line style="stroke:#A80036;stroke-width:1.5;" x1="293" x2="434" y1="47" y2="47"/><!--MD5=[3bd490cd0896ca440c1b38baec253d9c]
link InputStore to Map--><path codeLine="59" d="M180.13,282.83 C185.33,309.25 195.4,337.17 214.5,357 C246.68,390.43 271.2,370.32 314.5,387 C327.93,392.17 342.05,398.37 355.35,404.57 " fill="none" id="InputStore-to-Map" style="stroke:#A80036;stroke-width:1.0;"/><polygon fill="none" points="358.44,398.29,373.46,413.24,352.4,410.92,358.44,398.29" style="stroke:#A80036;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="34" x="269.5" y="338.0669">binds</text><text fill="#000000" font-family="sans-serif" font-size="13" font-style="italic" lengthAdjust="spacing" textLength="9" x="307.5" y="338.0669">K</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="13" x="320.5" y="338.0669">to</text><text fill="#000000" font-family="sans-serif" font-size="13" font-style="italic" lengthAdjust="spacing" textLength="37" x="337.5" y="338.0669">String</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="24" x="215.5" y="353.1997">and</text><text fill="#000000" font-family="sans-serif" font-size="13" font-style="italic" lengthAdjust="spacing" textLength="9" x="243.5" y="353.1997">V</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="13" x="256.5" y="353.1997">to</text><text fill="#000000" font-family="sans-serif" font-size="13" font-style="italic" lengthAdjust="spacing" textLength="155" x="273.5" y="353.1997">InputChannel&lt;String&gt;&gt;</text><!--MD5=[dafea935b93e1507e43ab6bb18b19291]
link OutputStore to Map--><path codeLine="60" d="M471.71,295.09 C464.69,304.83 458.13,314.89 452.5,325 C440.72,346.15 432.08,371.76 426.21,392.99 " fill="none" id="OutputStore-to-Map" style="stroke:#A80036;stroke-width:1.0;"/><polygon fill="none" points="432.98,394.78,421.27,412.44,419.41,391.33,432.98,394.78" style="stroke:#A80036;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="34" x="513" y="338.0669">binds</text><text fill="#000000" font-family="sans-serif" font-size="13" font-style="italic" lengthAdjust="spacing" textLength="9" x="551" y="338.0669">K</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="13" x="564" y="338.0669">to</text><text fill="#000000" font-family="sans-serif" font-size="13" font-style="italic" lengthAdjust="spacing" textLength="37" x="581" y="338.0669">String</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="24" x="453.5" y="353.1997">and</text><text fill="#000000" font-family="sans-serif" font-size="13" font-style="italic" lengthAdjust="spacing" textLength="9" x="481.5" y="353.1997">V</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="13" x="494.5" y="353.1997">to</text><text fill="#000000" font-family="sans-serif" font-size="13" font-style="italic" lengthAdjust="spacing" textLength="166" x="511.5" y="353.1997">OutputChannel&lt;String&gt;&gt;</text><!--MD5=[f5d54dc51fd6ade8227c4f6eccb87f85]
link Listener to Channel--><path codeLine="64" d="M247.27,613.5 C254.35,613.5 261.43,613.5 268.52,613.5 " fill="none" id="Listener-to-Channel" style="stroke:#A80036;stroke-width:1.0;"/><polygon fill="#A80036" points="281.69,613.5,275.69,609.5,269.69,613.5,275.69,617.5,281.69,613.5" style="stroke:#A80036;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="10" x="255.0105" y="609.7679">N</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="8" x="266.1854" y="610.1421">1</text><!--MD5=[6d9fb721530fa5a5a652455aa24f1d2e]
link InputChannel to Channel--><path codeLine="65" d="M280.53,486.25 C294.93,500.57 311.09,516.63 326.92,532.37 " fill="none" id="InputChannel-to-Channel" style="stroke:#A80036;stroke-width:1.0;"/><polygon fill="none" points="332.06,527.62,341.3,546.68,322.19,537.54,332.06,527.62" style="stroke:#A80036;stroke-width:1.0;"/><!--MD5=[a2f9bcabbe9ec688eba75489fc0866cd]
link OutputChannel to Channel--><path codeLine="66" d="M588.53,473.55 C565.54,491.2 536.91,513.18 509.24,534.41 " fill="none" id="OutputChannel-to-Channel" style="stroke:#A80036;stroke-width:1.0;"/><polygon fill="none" points="513.25,540.16,493.12,546.78,504.72,529.05,513.25,540.16" style="stroke:#A80036;stroke-width:1.0;"/><!--MD5=[8b62abbfe90ec69e50fa3ee30413f165]
reverse link InputStore to InputChannel--><path codeLine="68" d="M160.23,295.77 C159.74,316.32 161.74,337.78 168.5,357 C172.15,367.39 177.82,377.41 184.3,386.63 " fill="none" id="InputStore-backto-InputChannel" style="stroke:#A80036;stroke-width:1.0;"/><polygon fill="#A80036" points="160.87,282.78,156.5846,288.5796,160.2898,294.766,164.5752,288.9664,160.87,282.78" style="stroke:#A80036;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="8" x="151.269" y="302.1542">1</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="10" x="167.2856" y="375.982">N</text><!--MD5=[3b1b1da4af67453fad1c78147a319924]
reverse link OutputStore to OutputChannel--><path codeLine="69" d="M676.09,306.02 C680.04,312.12 683.55,318.45 686.5,325 C697.7,349.85 684.66,377.71 668.97,399.24 " fill="none" id="OutputStore-backto-OutputChannel" style="stroke:#A80036;stroke-width:1.0;"/><polygon fill="#A80036" points="668.55,295.29,668.7236,302.499,675.4448,305.1115,675.2712,297.9025,668.55,295.29" style="stroke:#A80036;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="8" x="669.8291" y="315.4092">1</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="10" x="664.0412" y="388.3806">N</text><!--MD5=[755798162876e12577ebc5fd419bc3df]
reverse link ExecutionContext to InputStore--><path codeLine="73" d="M328.4,64.21 C308.67,82.31 283.16,105.72 258.64,128.21 " fill="none" id="ExecutionContext-backto-InputStore" style="stroke:#A80036;stroke-width:1.0;"/><polygon fill="#A80036" points="338.15,55.26,331.0241,56.3653,329.3036,63.3681,336.4295,62.2628,338.15,55.26" style="stroke:#A80036;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="8" x="322.9959" y="75.0846">1</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="8" x="257.9357" y="117.4834">1</text><!--MD5=[6acc1d6907486f84685a3e6fc516cfa7]
reverse link ExecutionContext to OutputStore--><path codeLine="74" d="M399.01,64.41 C415.17,79.16 435.15,97.4 455.3,115.79 " fill="none" id="ExecutionContext-backto-OutputStore" style="stroke:#A80036;stroke-width:1.0;"/><polygon fill="#A80036" points="388.99,55.26,390.7214,62.2602,397.849,63.3544,396.1176,56.3542,388.99,55.26" style="stroke:#A80036;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="8" x="386.2282" y="75.0846">1</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="8" x="438.9194" y="104.8022">1</text><!--MD5=[0081c146ed834cc72672f317b3fd96bd]
@startuml
interface Listener<T> << (T,#3495eb) typealias >>  {
  **alias for:** (T) -> Unit
}

interface Channel<T> {
    + streamTerm: Struct
    + isClosed: Boolean
    - -
    + addListener(listener: Listener<T?>)
    + removeListener(listener: Listener<T?>)
    + clearListeners()
    ..
    + close()
}

interface InputChannel<T> {
    + isOver: Boolean
    + available: Boolean
    - -
    + read(): T?
    + peek(): T?
}

interface OutputChannel<T> {
    + write(T)
    + flush()
}

interface InputStore {
    + stdIn: InputChannel<String>
    ..
    + current: InputChannel<String>?
    + currentAliases: Sequence<String>
    - -
    + setCurrent(String): InputStore
    + setCurrent(InputChannel<String>): InputStore
    ..
    + findByTerm(Term): Sequence<InputChannel<String>>
    + aliasesOf(InputChannel<String>): Sequence<String>
}

interface OutputStore {
    + stdOut: OutputChannel<String>
    + stdErr: OutputChannel<String>
    + warnings: OutputChannel<PrologWarning>
    ..
    + current: OutputChannel<String>?
    + currentAliases: Sequence<String>
    - -
    + setCurrent(String): OutputStore
    + setCurrent(OutputChannel<String>): OutputStore
    ..
    + findByTerm(Term): Sequence<OutputChannel<String>>
    + aliasesOf(OutputChannel<String>): Sequence<String>
}

interface Map<K, V>

InputStore - -|> Map: binds //K// to //String//\nand //V// to //InputChannel<String>>//
OutputStore - -|> Map: binds //K// to //String//\nand //V// to //OutputChannel<String>>//

interface OutputStore

Channel "1" *-left- "N" Listener
InputChannel - -|> Channel
OutputChannel - -|> Channel

InputStore "1" *- - "N" InputChannel
OutputStore "1" *- - "N" OutputChannel

interface ExecutionContext

ExecutionContext "1" *- - "1" InputStore
ExecutionContext "1" *- - "1" OutputStore
@enduml

PlantUML version 1.2021.00(Sun Jan 10 11:25:05 CET 2021)
(GPL source distribution)
Java Runtime: OpenJDK Runtime Environment
JVM: OpenJDK 64-Bit Server VM
Default Encoding: UTF-8
Language: it
Country: IT
--></g></svg>